**********************************************************************
セッション：S4c・S5c
テーマ　　：Autodesk Fusion 360/EAGLEでプリント基板＆ケース設計ワークショップ 
講師　　　：大栄 豊 (株)オーバス
日時　　　：2020/08/21(金) 13:40～16:20
参加人数　：5～8名
**********************************************************************


<講師紹介>
  大栄 豊
  (株)オーバス
  SWEST/LED-Camp実行委員会

<目標>
  Autodesk EAGLEを使用して回路図を書けるようになる
    プリント基板のパターン設計(アートワーク)

<設計する回路基板>
   ESP32-DevkitC相当の回路
     LED, ブザー, CdSセル, プッシュSW, 外部電源コネクタ....

   ESP32モジュールは端子がハーフピッチのため取り扱いが難しい場合
   があるためESP32-DevkitCと共用できる基板を設計する

   部品表は公開資料参照

<EAGLEの基本操作>
  1.プロジェクト作成
     File->New->Projectでプロジェクトを作成する
  2.回路図を作成
     File->New->Schematicで回路図エディタを開く
     左のパネルのAddPartアイコンを選択し、フレーム(図面枠)を選択する
       (今回はframesのA3L-LOCを選択)
     フレームにライブラリの部品を配置していく
        標準のライブラリを利用する場合
          con-xxxxx: 各種コネクタ
          frames : 各種回路図面枠
          rcl、register : 受動部品 抵抗、コンデンサ、コイル
          pinhead  : 各種ピンヘッダ
          supply : 各種電源、GND

        カスタムライブラリを追加する場合
          Library Managerを使用してライブラリを追加
          Library Managerを開きAvailableタブ->Browseでファイル選択
            ライブラリはメーカや有志が公開している物を利用できる

        配置した部品の付属情報の変更
           部品を右クリックしてPropertiesで設定する
              部品名: Name, 電圧値など: Value ...

        部品の結線
　　　　　部品の端子どうしをクリックして結線

        回路図の保存
　　　　　フロッピーディスクアイコンをクリック
          もしくはFile->Save

　　回路図の注意点
           図面枠はしっかり活用する
           部品配置を考えて配置すると綺麗できる
           部品は近づけすぎない方がよい
           電源とGNDもパーツで配置するとよい
           部品情報も正しく設定する。

<回路図作成実習>
  実習用にカスタムライブラリとESP32 DevkitC相当の回路図部分のファイルを提供
  残りの回路図部分を作成して操作を体験する

  Q: ブザーのライブラリが解りません。
        Parts add->swest-partsのタブにあります
    
    
<プリント基板(P板) アートワーク>
  今回は作成した回路図からP板の図面を作成する

     ・SCH
       BRD のアイコンを選択して回路図を変換する
     ・表示されたウインドの意味
          右側の黒い四角の領域がP板の外形線
          左が配置する部品とその接続
      
     ・最初にGridを表示すると便利
        Layerの20 Dimensionを選択
          好みに応じてGridの設定をmil(ミリインチ)からmm(ミリメートル)に変更

     ・その他ツール
       自動配線ツール、寸法表示ツール、配線チェックツール(DRC: Design rule checker)...

  P版の外形編集
    EAGLEの無償版では100mm x 160mmまで設計できる
    外形は柔軟な形状にできる
    今回は80mm x 50mm程度の基盤に部品配置しビス穴を実装する

  部品配置について
    配線が短くなるように配置する。
    P版のサイズに余裕があると配置が楽になる
    部品だけではなくNameも隠れないようにする。(部品の下に隠れないようにする)
    Valueは必要に応じて削除してもOK

  自動配線について
    部品の配置が終了したら自動配線を行う
    最初に自動配線ルールの設定を行う
        基板メーカごとに配置ルールが異なるので発注先のルールを確認する
        初期設定では細い配線を使用しているため、供給電力などに応じて配線幅を変更する
    ビス穴の干渉により配線ショートが発生する場合がある
       ビス穴の周りに配線禁止エリアを設定する
    自動配線が一度で終わらない場合でも再度実施することで配線できる場合がある
    配線ができない物は手動で配線する
    すべての配線が終了すればDRCで検証する

<アートワーク実習>
  回路図を利用してアートワークを実際に行う


<ガーバーデータの作成>
  今回はSeeed Fusion PCBとしてガーバーデータを作成
  EAGLEの変換ツールでガーバーデータを出力する
     変換時にSeeed Fusion PCBを指定して変換する
  ガーバデータチェック
    Seeed Fusion PCBのサイトにガーバーをアップロードしてビューワーで確認する

<Fusion360について>
  アートワークの画面からFusion360を選択すると3Dのモデルで確認を行うことができる
  Fusion360でもEAGLEと同等の使い勝手で回路の作成ができる
    

■まとめ
  回路図作成から発注までの手続きの実習を行った
  Autodesk EAGLEで回路図、アートワーク、ガーバーデータの作成を行った
  Seeed Fusion PCBのサイトでガーバーデータが認識されることを確認した

   

     
       
